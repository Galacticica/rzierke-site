<!--
file: song_list.html
Author: Reagan Zierke
Date: 2026-02-05
Description: Template for song list view.
-->

{% extends "base.html" %}
{% load static %}
{% load lyric_cleaner %}

{% block title %}
<title>Songs</title>
{% endblock %}

{% block content %}
<div class="container mx-auto max-w-6xl px-4 py-8 song-list">

    <div class="flex items-center justify-between">
        <a
            href="{% url 'min-home' %}"
            class="btn btn-ghost btn-sm"
            onclick="if (window.history.length > 1) { event.preventDefault(); window.history.back(); }"
        >‚Üê Back</a>
    </div>

    <div class="mt-4 flex flex-wrap items-start justify-between gap-3 song-header">
        <div>
            <h1 class="text-3xl font-bold tracking-tight md:text-4xl">Songs</h1>
            <p class="mt-1 text-base-content/70">
                Browse the library and open a song to view lyrics and details.
            </p>
        </div>

        <form
            id="song-search-form"
            method="get"
            action="{% url 'song-list' %}"
            class="flex w-full items-end gap-2 sm:w-auto song-actions"
            hx-get="{% url 'song-list' %}"
            hx-trigger="submit, keyup changed delay:250ms from:input[name='q']"
            hx-target="#song-results"
            hx-swap="outerHTML"
            hx-include="#song-filter-form"
            hx-push-url="true">
            <div class="form-control w-full sm:w-72">
                <label class="label">
                    <span class="label-text">Search</span>
                </label>
                <input
                    type="text"
                    name="q"
                    value="{{ q|default:'' }}"
                    class="input input-bordered"
                    placeholder="Title, artist, LSB, CCLI" />
            </div>
            <button type="submit" class="btn btn-secondary">Search</button>
            {% if q %}
                <a
                    class="btn btn-ghost"
                    href="{% url 'song-list' %}"
                    hx-get="{% url 'song-list' %}"
                    hx-target="#song-layout"
                    hx-swap="outerHTML"
                    hx-params="none"
                    hx-push-url="true">
                    Clear
                </a>
            {% endif %}
        </form>
    </div>

    {% include "ministry/partials/song_layout.html" %}
</div>
{% endblock %}
