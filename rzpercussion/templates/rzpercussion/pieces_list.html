<!--
file: pieces_list.html
Author: Reagan Zierke
Date: 2026-02-07
Description: Template for pieces list view.
-->

{% extends "base.html" %}
{% load static %}

{% block title %}
<title>Pieces</title>
{% endblock %}

{% block content %}
<div class="container mx-auto max-w-6xl px-4 py-8 piece-list">

    <div class="flex items-center justify-between">
        <a
            href="{% url 'homepage' %}"
            class="btn btn-ghost btn-sm"
        >‚Üê Back</a>
    </div>

    <div class="mt-4 flex flex-wrap items-start justify-between gap-3 piece-header">
        <div>
            <h1 class="text-3xl font-bold tracking-tight md:text-4xl">Pieces</h1>
            <p class="mt-1 text-base-content/70">
                Browse the collection and view piece details.
            </p>
        </div>

        <form
            id="piece-search-form"
            method="get"
            action="{% url 'pieces-list' %}"
            class="flex w-full items-end gap-2 sm:w-auto piece-actions"
            hx-get="{% url 'pieces-list' %}"
            hx-trigger="submit, keyup changed delay:250ms from:input[name='q']"
            hx-target="#piece-results"
            hx-swap="outerHTML"
            hx-include="#piece-filter-form"
            hx-push-url="true">
            <div class="form-control w-full sm:w-72">
                <label class="label">
                    <span class="label-text">Search</span>
                </label>
                <input
                    type="text"
                    name="q"
                    value="{{ q|default:'' }}"
                    class="input input-bordered"
                    placeholder="Title, composer" />
            </div>
            <button type="submit" class="btn btn-secondary">Search</button>
            {% if q %}
                <a
                    class="btn btn-ghost"
                    href="{% url 'pieces-list' %}"
                    hx-get="{% url 'pieces-list' %}"
                    hx-target="#piece-layout"
                    hx-swap="outerHTML"
                    hx-params="none"
                    hx-push-url="true">
                    Clear
                </a>
            {% endif %}
        </form>
    </div>

    {% include "rzpercussion/partials/piece_layout.html" %}
</div>
{% endblock %}
